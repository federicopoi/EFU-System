{"ast":null,"code":"var _jsxFileName = \"/Users/fedepoi/plasticos-boulevares-tpm/client/src/components/detalletarjeta/cerrartarjeta/CerrarTarjetaModal.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { clearErrors } from \"../../../store/actions/errorActions\";\nimport { cerrarTarjeta } from \"../../../store/actions/tarjetaActions\";\nimport { getCampos } from \"../../../store/actions/camposActions\";\nimport { Button, Modal, ModalHeader, ModalBody, Form, Label, Input, FormGroup, Alert } from \"reactstrap\";\nexport class CerrarTarjetaModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = ({\n      target\n    }) => {\n      const {\n        formValues\n      } = this.state;\n      formValues[target.name] = target.value;\n      this.setState({\n        formValues\n      });\n      this.handleValidation(target);\n    };\n\n    this.handleValidation = target => {\n      const {\n        name,\n        value\n      } = target;\n      const fieldValidationErrors = this.state.formErrors;\n      const validity = this.state.formValidity;\n      const isEmail = name === \"email\";\n      const isPassword = name === \"password\";\n      const isResposable = name === \"responsable\";\n      const emailTest = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n      validity[name] = value.length > 0;\n      fieldValidationErrors[name] = validity[name] ? \"\" : \"Este campo es requerido y no puede estar vacio\";\n\n      if (validity[name]) {\n        if (isEmail) {\n          validity[name] = emailTest.test(value);\n          fieldValidationErrors[name] = validity[name] ? \"\" : `${name} should be a valid email address`;\n        }\n\n        if (isPassword) {\n          validity[name] = value.length >= 3;\n          fieldValidationErrors[name] = validity[name] ? \"\" : `${name} should be 3 characters minimum`;\n        }\n      }\n\n      this.setState({\n        formErrors: fieldValidationErrors,\n        formValidity: validity\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        isSubmitting: true\n      });\n      const {\n        formValues,\n        formValidity\n      } = this.state;\n\n      if (Object.values(formValidity).every(Boolean)) {\n        alert(\"Form is validated! Submitting the form...\");\n        this.setState({\n          isSubmitting: false\n        });\n      } else {\n        for (let key in formValues) {\n          let target = {\n            name: key,\n            value: formValues[key]\n          };\n          this.handleValidation(target);\n        }\n\n        this.setState({\n          isSubmitting: false\n        });\n      }\n    };\n\n    this.onChangeConvertida = e => {\n      this.setState({\n        formValues: {\n          convertida: e.tarjet.value\n        }\n      });\n    };\n\n    this.toggle = () => {\n      // Clear errors\n      this.props.clearErrors();\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const {\n        _id,\n        inicioReparacionDia,\n        inicioReparacionHora,\n        finReparacionDia,\n        finReparacionHora,\n        responsable,\n        tiempoEmpleado,\n        causa,\n        riesgoFinal,\n        tareaRealizada,\n        tipoAccion,\n        materialUtilizado,\n        convertida\n      } = this.state;\n      const horaInicio = inicioReparacionHora.split(\":\");\n      const horaFinal = finReparacionHora.split(\":\");\n      const InicioReparacionHoraFloat = parseFloat(horaInicio[0]);\n      const FinReparacionHoraFloat = parseFloat(horaFinal[0]);\n      const horaFinal1 = FinReparacionHoraFloat - InicioReparacionHoraFloat;\n      const tiemploEmpleadoString = `${horaFinal1}`; // Cerrar Tarjeta\n\n      const tarjetaActualizada = {\n        _id,\n        inicioReparacion: inicioReparacionDia + \" \" + inicioReparacionHora,\n        finReparacion: finReparacionDia + \" \" + finReparacionHora,\n        responsable,\n        tiempoEmpleado: tiemploEmpleadoString,\n        causa,\n        tareaRealizada,\n        tipoAccion,\n        riesgoFinal,\n        materialUtilizado,\n        convertida\n      };\n      this.props.cerrarTarjeta(tarjetaActualizada);\n\n      if (!_id || !inicioReparacionDia || !finReparacionDia || !inicioReparacionHora || !finReparacionHora || !responsable || !tiempoEmpleado || !causa || !riesgoFinal || !tipoAccion || !tareaRealizada || !materialUtilizado) {\n        return null;\n      } else {\n        return this.toggle();\n      }\n    };\n\n    this.state = {\n      formValues: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        // tiempoEmpleado: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\"\n      },\n      formErrors: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\"\n      },\n      formValidity: {\n        _id: this.props._id,\n        inicioReparacionDia: false,\n        inicioReparacionHora: false,\n        finReparacionDia: false,\n        finReparacionHora: false,\n        responsable: false,\n        causa: false,\n        riesgoFinal: false,\n        tareaRealizada: false,\n        tipoAccion: false,\n        materialUtilizado: false\n      },\n      isSubmitting: false,\n      modal: false,\n      convertida: false\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      error\n    } = this.props;\n\n    if (error !== prevProps.error) {\n      //Check for login error\n      console.log(error.msg.msg);\n\n      if (error.id === \"CERRAR_TARJETA_ERROR\") {\n        this.setState({\n          msg: error.msg.msg\n        });\n      } else {\n        this.setState({\n          msg: null\n        });\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.props.getCampos();\n  }\n\n  render() {\n    const {\n      campos\n    } = this.props.campos;\n    const {\n      formValues,\n      formErrors,\n      isSubmitting\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.toggle,\n      style: {\n        cursor: \"pointer\"\n      },\n      className: \"my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }\n    }, \"Cerrar Tarjeta\"), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }\n    }, \"Cerrar Tarjeta\"), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"updaters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, \"Inicio de la Tarea\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.inicioReparacionDia,\n      type: \"date\",\n      name: \"inicioReparacionDia\",\n      id: \"inicioReparacionDia\",\n      className: `form-control ${formErrors.inicioReparacionDia ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, formErrors.inicioReparacionDia), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.inicioReparacionHora,\n      type: \"time\",\n      name: \"inicioReparacionHora\",\n      id: \"inicioReparacionHora\",\n      className: `form-control ${formErrors.inicioReparacionHora ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }, formErrors.inicioReparacionHora), /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, \"Fin de la Tarea\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.finReparacionDia,\n      type: \"date\",\n      name: \"finReparacionDia\",\n      id: \"finReparacionDia\",\n      className: `form-control ${formErrors.finReparacionDia ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }\n    }, formErrors.finReparacionDia), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.finReparacionHora,\n      type: \"time\",\n      name: \"finReparacionHora\",\n      id: \"finReparacionHora\",\n      className: `form-control ${formErrors.finReparacionHora ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }\n    }, formErrors.finReparacionHora), /*#__PURE__*/React.createElement(Label, {\n      for: \"responsable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }\n    }, \"Responsable\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.responsable,\n      type: \"text\",\n      name: \"responsable\",\n      id: \"responsable\",\n      className: `form-control ${formErrors.responsable ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }\n    }, formErrors.responsable), /*#__PURE__*/React.createElement(Label, {\n      for: \"detecto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }, \"Riesgo Final\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"select\",\n      name: \"riesgoFinal\",\n      id: \"riesgoFinal\",\n      onChange: this.handleChange,\n      value: formValues.riesgoFinal,\n      className: `form-control ${formErrors.riesgoFinal ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 19\n      }\n    }, \"Seleccionar\"), campos && campos.filter(({\n      name,\n      value\n    }) => {\n      return name === \"riesgoFinal\";\n    }).map(({\n      name,\n      value,\n      _id\n    }, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: index,\n        _id: _id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 27\n        }\n      }, value);\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }\n    }, formErrors.riesgoFinal), /*#__PURE__*/React.createElement(Label, {\n      for: \"updaters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }\n    }, \"Causa de la Anomalia\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.causa,\n      type: \"text\",\n      name: \"causa\",\n      id: \"causa\",\n      className: `form-control ${formErrors.causa ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }\n    }, formErrors.causa), /*#__PURE__*/React.createElement(Label, {\n      for: \"updaters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }\n    }, \"Tarea Realizada\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.tareaRealizada,\n      type: \"text\",\n      name: \"tareaRealizada\",\n      id: \"tareaRealizada\",\n      className: `form-control ${formErrors.tareaRealizada ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }\n    }, formErrors.tareaRealizada), /*#__PURE__*/React.createElement(Label, {\n      for: \"tipoAccion\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }\n    }, \"Tipo de acci\\xF3n a realizar *\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"select\",\n      name: \"tipoAccion\",\n      id: \"tipoAccion\",\n      className: `form-control ${formErrors.tipoAccion ? \"is-invalid\" : \"\"}`,\n      onChange: this.handleChange,\n      value: formValues.tipoAccion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 19\n      }\n    }, \"Seleccionar\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 19\n      }\n    }, \"Eliminar\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 19\n      }\n    }, \"Contener\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 19\n      }\n    }, \"Reemplazar\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 19\n      }\n    }, \"Simplificar\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 17\n      }\n    }, formErrors.tipoAccion), /*#__PURE__*/React.createElement(Label, {\n      for: \"updaters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 17\n      }\n    }, \"Material Utilizado\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.materialUtilizado,\n      type: \"text\",\n      name: \"materialUtilizado\",\n      id: \"materialUtilizado\",\n      className: `form-control ${formErrors.materialUtilizado ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 17\n      }\n    }, formErrors.materialUtilizado), this.props.color !== \"Azul\" && /*#__PURE__*/React.createElement(FormGroup, {\n      check: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      check: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"checkbox\",\n      id: \"convertida\",\n      name: \"convertida\",\n      onChange: () => {\n        this.setState({\n          convertida: !this.state.convertida\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 23\n      }\n    }), \"Tarjeta Convertida\")), /*#__PURE__*/React.createElement(Button, {\n      color: \"dark\",\n      block: true,\n      style: {\n        marginTop: \"2rem\"\n      },\n      type: \"submit\",\n      className: \"btn btn-primary btn-block\",\n      disabled: isSubmitting,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 17\n      }\n    }, isSubmitting ? \"Please wait...\" : \"Submit\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  error: state.error,\n  campos: state.campos\n});\n\nexport default connect(mapStateToProps, {\n  clearErrors,\n  cerrarTarjeta,\n  getCampos\n})(CerrarTarjetaModal);","map":{"version":3,"sources":["/Users/fedepoi/plasticos-boulevares-tpm/client/src/components/detalletarjeta/cerrartarjeta/CerrarTarjetaModal.jsx"],"names":["React","Component","connect","clearErrors","cerrarTarjeta","getCampos","Button","Modal","ModalHeader","ModalBody","Form","Label","Input","FormGroup","Alert","CerrarTarjetaModal","constructor","props","handleChange","target","formValues","state","name","value","setState","handleValidation","fieldValidationErrors","formErrors","validity","formValidity","isEmail","isPassword","isResposable","emailTest","length","test","handleSubmit","event","preventDefault","isSubmitting","Object","values","every","Boolean","alert","key","onChangeConvertida","e","convertida","tarjet","toggle","modal","onSubmit","_id","inicioReparacionDia","inicioReparacionHora","finReparacionDia","finReparacionHora","responsable","tiempoEmpleado","causa","riesgoFinal","tareaRealizada","tipoAccion","materialUtilizado","horaInicio","split","horaFinal","InicioReparacionHoraFloat","parseFloat","FinReparacionHoraFloat","horaFinal1","tiemploEmpleadoString","tarjetaActualizada","inicioReparacion","finReparacion","componentDidUpdate","prevProps","error","console","log","msg","id","componentDidMount","render","campos","cursor","filter","map","index","color","marginTop","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { clearErrors } from \"../../../store/actions/errorActions\";\nimport { cerrarTarjeta } from \"../../../store/actions/tarjetaActions\";\nimport { getCampos } from \"../../../store/actions/camposActions\";\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  Form,\n  Label,\n  Input,\n  FormGroup,\n  Alert,\n} from \"reactstrap\";\nexport class CerrarTarjetaModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formValues: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        // tiempoEmpleado: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\",\n      },\n      formErrors: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\",\n      },\n      formValidity: {\n        _id: this.props._id,\n        inicioReparacionDia: false,\n        inicioReparacionHora: false,\n        finReparacionDia: false,\n        finReparacionHora: false,\n        responsable: false,\n        causa: false,\n        riesgoFinal: false,\n        tareaRealizada: false,\n        tipoAccion: false,\n        materialUtilizado: false,\n      },\n      isSubmitting: false,\n      modal: false,\n      convertida: false,\n    };\n  }\n\n  handleChange = ({ target }) => {\n    const { formValues } = this.state;\n    formValues[target.name] = target.value;\n    this.setState({ formValues });\n    this.handleValidation(target);\n  };\n\n  handleValidation = (target) => {\n    const { name, value } = target;\n    const fieldValidationErrors = this.state.formErrors;\n    const validity = this.state.formValidity;\n    const isEmail = name === \"email\";\n    const isPassword = name === \"password\";\n    const isResposable = name === \"responsable\";\n    const emailTest = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n\n    validity[name] = value.length > 0;\n    fieldValidationErrors[name] = validity[name]\n      ? \"\"\n      : \"Este campo es requerido y no puede estar vacio\";\n\n    if (validity[name]) {\n      if (isEmail) {\n        validity[name] = emailTest.test(value);\n        fieldValidationErrors[name] = validity[name]\n          ? \"\"\n          : `${name} should be a valid email address`;\n      }\n      if (isPassword) {\n        validity[name] = value.length >= 3;\n        fieldValidationErrors[name] = validity[name]\n          ? \"\"\n          : `${name} should be 3 characters minimum`;\n      }\n    }\n\n    this.setState({\n      formErrors: fieldValidationErrors,\n      formValidity: validity,\n    });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ isSubmitting: true });\n    const { formValues, formValidity } = this.state;\n    if (Object.values(formValidity).every(Boolean)) {\n      alert(\"Form is validated! Submitting the form...\");\n      this.setState({ isSubmitting: false });\n    } else {\n      for (let key in formValues) {\n        let target = {\n          name: key,\n          value: formValues[key],\n        };\n        this.handleValidation(target);\n      }\n      this.setState({ isSubmitting: false });\n    }\n  };\n\n  onChangeConvertida = (e) => {\n    this.setState({ formValues: { convertida: e.tarjet.value } });\n  };\n  componentDidUpdate(prevProps) {\n    const { error } = this.props;\n    if (error !== prevProps.error) {\n      //Check for login error\n      console.log(error.msg.msg);\n      if (error.id === \"CERRAR_TARJETA_ERROR\") {\n        this.setState({\n          msg: error.msg.msg,\n        });\n      } else {\n        this.setState({\n          msg: null,\n        });\n      }\n    }\n  }\n  toggle = () => {\n    // Clear errors\n    this.props.clearErrors();\n    this.setState({\n      modal: !this.state.modal,\n    });\n  };\n  onSubmit = (e) => {\n    e.preventDefault();\n    const {\n      _id,\n      inicioReparacionDia,\n      inicioReparacionHora,\n      finReparacionDia,\n      finReparacionHora,\n      responsable,\n      tiempoEmpleado,\n      causa,\n      riesgoFinal,\n      tareaRealizada,\n      tipoAccion,\n      materialUtilizado,\n      convertida,\n    } = this.state;\n\n    const horaInicio = inicioReparacionHora.split(\":\");\n    const horaFinal = finReparacionHora.split(\":\");\n\n    const InicioReparacionHoraFloat = parseFloat(horaInicio[0]);\n    const FinReparacionHoraFloat = parseFloat(horaFinal[0]);\n\n    const horaFinal1 = FinReparacionHoraFloat - InicioReparacionHoraFloat;\n\n    const tiemploEmpleadoString = `${horaFinal1}`;\n\n    // Cerrar Tarjeta\n    const tarjetaActualizada = {\n      _id,\n      inicioReparacion: inicioReparacionDia + \" \" + inicioReparacionHora,\n      finReparacion: finReparacionDia + \" \" + finReparacionHora,\n      responsable,\n      tiempoEmpleado: tiemploEmpleadoString,\n      causa,\n      tareaRealizada,\n      tipoAccion,\n      riesgoFinal,\n      materialUtilizado,\n      convertida,\n    };\n\n    this.props.cerrarTarjeta(tarjetaActualizada);\n\n    if (\n      !_id ||\n      !inicioReparacionDia ||\n      !finReparacionDia ||\n      !inicioReparacionHora ||\n      !finReparacionHora ||\n      !responsable ||\n      !tiempoEmpleado ||\n      !causa ||\n      !riesgoFinal ||\n      !tipoAccion ||\n      !tareaRealizada ||\n      !materialUtilizado\n    ) {\n      return null;\n    } else {\n      return this.toggle();\n    }\n  };\n  componentDidMount() {\n    this.props.getCampos();\n  }\n  render() {\n    const { campos } = this.props.campos;\n    const { formValues, formErrors, isSubmitting } = this.state;\n\n    return (\n      <div>\n        <p onClick={this.toggle} style={{ cursor: \"pointer\" }} className=\"my-3\">\n          Cerrar Tarjeta\n        </p>\n        <Modal isOpen={this.state.modal} toggle={this.toggle}>\n          <ModalHeader toggle={this.toggle}>Cerrar Tarjeta</ModalHeader>\n          <ModalBody>\n            <Form onSubmit={this.handleSubmit}>\n              <FormGroup>\n                <Label for=\"updaters\">Inicio de la Tarea</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.inicioReparacionDia}\n                  type=\"date\"\n                  name=\"inicioReparacionDia\"\n                  id=\"inicioReparacionDia\"\n                  className={`form-control ${\n                    formErrors.inicioReparacionDia ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.inicioReparacionDia}\n                </div>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.inicioReparacionHora}\n                  type=\"time\"\n                  name=\"inicioReparacionHora\"\n                  id=\"inicioReparacionHora\"\n                  className={`form-control ${\n                    formErrors.inicioReparacionHora ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.inicioReparacionHora}\n                </div>\n\n                <Label>Fin de la Tarea</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.finReparacionDia}\n                  type=\"date\"\n                  name=\"finReparacionDia\"\n                  id=\"finReparacionDia\"\n                  className={`form-control ${\n                    formErrors.finReparacionDia ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.finReparacionDia}\n                </div>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.finReparacionHora}\n                  type=\"time\"\n                  name=\"finReparacionHora\"\n                  id=\"finReparacionHora\"\n                  className={`form-control ${\n                    formErrors.finReparacionHora ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.finReparacionHora}\n                </div>\n\n                <Label for=\"responsable\">Responsable</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.responsable}\n                  type=\"text\"\n                  name=\"responsable\"\n                  id=\"responsable\"\n                  className={`form-control ${\n                    formErrors.responsable ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.responsable}\n                </div>\n\n                <Label for=\"detecto\">Riesgo Final</Label>\n                <Input\n                  type=\"select\"\n                  name=\"riesgoFinal\"\n                  id=\"riesgoFinal\"\n                  onChange={this.handleChange}\n                  value={formValues.riesgoFinal}\n                  className={`form-control ${\n                    formErrors.riesgoFinal ? \"is-invalid\" : \"\"\n                  }`}\n                >\n                  <option>Seleccionar</option>\n                  {campos &&\n                    campos\n                      .filter(({ name, value }) => {\n                        return name === \"riesgoFinal\";\n                      })\n                      .map(({ name, value, _id }, index) => {\n                        return (\n                          <option key={index} _id={_id}>\n                            {value}\n                          </option>\n                        );\n                      })}\n                </Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.riesgoFinal}\n                </div>\n\n                <Label for=\"updaters\">Causa de la Anomalia</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.causa}\n                  type=\"text\"\n                  name=\"causa\"\n                  id=\"causa\"\n                  className={`form-control ${\n                    formErrors.causa ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">{formErrors.causa}</div>\n\n                <Label for=\"updaters\">Tarea Realizada</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.tareaRealizada}\n                  type=\"text\"\n                  name=\"tareaRealizada\"\n                  id=\"tareaRealizada\"\n                  className={`form-control ${\n                    formErrors.tareaRealizada ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.tareaRealizada}\n                </div>\n\n                <Label for=\"tipoAccion\">Tipo de acción a realizar *</Label>\n                <Input\n                  type=\"select\"\n                  name=\"tipoAccion\"\n                  id=\"tipoAccion\"\n                  className={`form-control ${\n                    formErrors.tipoAccion ? \"is-invalid\" : \"\"\n                  }`}\n                  onChange={this.handleChange}\n                  value={formValues.tipoAccion}\n                >\n                  <option>Seleccionar</option>\n                  <option>Eliminar</option>\n                  <option>Contener</option>\n                  <option>Reemplazar</option>\n                  <option>Simplificar</option>\n                </Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.tipoAccion}\n                </div>\n\n                <Label for=\"updaters\">Material Utilizado</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.materialUtilizado}\n                  type=\"text\"\n                  name=\"materialUtilizado\"\n                  id=\"materialUtilizado\"\n                  className={`form-control ${\n                    formErrors.materialUtilizado ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.materialUtilizado}\n                </div>\n\n                {this.props.color !== \"Azul\" && (\n                  <FormGroup check>\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        id=\"convertida\"\n                        name=\"convertida\"\n                        onChange={() => {\n                          this.setState({\n                            convertida: !this.state.convertida,\n                          });\n                        }}\n                      />\n                      Tarjeta Convertida\n                    </Label>\n                  </FormGroup>\n                )}\n                {/* {this.state.msg ? (\n                  <Alert color=\"danger\" className=\"mt-3\">\n                    {this.state.msg}\n                  </Alert>\n                ) : null} */}\n                <Button\n                  color=\"dark\"\n                  block\n                  style={{ marginTop: \"2rem\" }}\n                  type=\"submit\"\n                  className=\"btn btn-primary btn-block\"\n                  disabled={isSubmitting}\n                >\n                  {isSubmitting ? \"Please wait...\" : \"Submit\"}\n                </Button>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n  error: state.error,\n  campos: state.campos,\n});\nexport default connect(mapStateToProps, {\n  clearErrors,\n  cerrarTarjeta,\n  getCampos,\n})(CerrarTarjetaModal);\n"]},"metadata":{},"sourceType":"module"}