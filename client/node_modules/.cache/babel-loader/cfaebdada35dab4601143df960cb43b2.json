{"ast":null,"code":"var _jsxFileName = \"/Users/fedepoi/klockner_tpm/client/src/components/tarjetas/MisTarjetas.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getTarjetas } from \"../../store/actions/tarjetaActions\";\nimport { loadUser } from \"../../store/actions/authActions\";\nimport { Card, CardBody, Row, Col, Table, Button, Container } from \"reactstrap\";\nimport moment from \"moment\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { List, ScrollSync, Grid } from \"react-virtualized\";\nconst height = 700;\nconst rowHeight = 40;\nconst width = 1000;\n\nconst useSortableData = (items, config = null) => {\n  const [sortConfig, setSortConfig] = React.useState(config);\n  const sortedItems = React.useMemo(() => {\n    let sortableItems = [...items];\n\n    if (sortConfig !== null) {\n      sortableItems.sort((a, b) => {\n        if (a[sortConfig.key] < b[sortConfig.key]) {\n          return sortConfig.direction === \"ascending\" ? -1 : 1;\n        }\n\n        if (a[sortConfig.key] > b[sortConfig.key]) {\n          return sortConfig.direction === \"ascending\" ? 1 : -1;\n        }\n\n        return 0;\n      });\n    }\n\n    return sortableItems;\n  }, [items, sortConfig]);\n\n  const requestSort = key => {\n    let direction = \"ascending\";\n\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === \"ascending\") {\n      direction = \"descending\";\n    }\n\n    setSortConfig({\n      key,\n      direction\n    });\n  };\n\n  return {\n    items: sortedItems,\n    requestSort,\n    sortConfig\n  };\n};\n\nexport const TarjetasTable = props => {\n  const {\n    items,\n    requestSort,\n    sortConfig\n  } = useSortableData(props.tarjetas);\n\n  const getClassNamesFor = name => {\n    if (!sortConfig) {\n      return;\n    }\n\n    return sortConfig.key === name ? sortConfig.direction : undefined;\n  };\n\n  const rowRenderer = ({\n    index,\n    isScrolling,\n    key,\n    style\n  }) => {\n    const timeDiferrence = moment().diff(items[index].fecha, \"days\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      style: style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, items[index].numero, items[index].color === \"Azul\" ? items[index].color : null, items[index].color === \"Roja\" ? items[index].color : null, items[index].color === \"Verde\" ? items[index].color : null, items[index].color === \"Amarilla\" ? items[index].color : null, items[index].equipo, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }, items[index].prioridad, items[index].prioridad === \"Alta\" && items[index].estado === \"Abierta\" && timeDiferrence >= 15 && /*#__PURE__*/React.createElement(\"li\", {\n      className: \"border-0 p-0 text-danger list-inline-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"\\u26A0\\uFE0F\"), items[index].prioridad === \"Media\" && items[index].estado === \"Abierta\" && timeDiferrence >= 30 && /*#__PURE__*/React.createElement(\"li\", {\n      className: \"border-0 p-0 text-danger list-inline-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"\\u26A0\\uFE0F\"), items[index].prioridad === \"Baja\" && items[index].estado === \"Abierta\" && timeDiferrence >= 60 && /*#__PURE__*/React.createElement(\"li\", {\n      className: \"border-0 p-0 text-danger list-inline-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, \"\\u26A0\\uFE0F\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, moment(items[index].fecha).format(\"DD/MM/YYYY LTS\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, items[index].descripcion), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, items[index].estado), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: `/tarjeta/${items[index]._id}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"success\",\n      className: \"btn bg-secondary border border-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    }, \"Ver detalle\")))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-wrapper d-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-content container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-sm-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 23\n    }\n  }, \"Tarjetas\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-auto d-sm-flex no-block align-items-center mb-3 d-sm-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-weight-normal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \"Todas las tarjetas en la base de datos\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-auto d-sm-flex no-block align-items-center mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/agregartarjeta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \"Agregar Tarjeta\"))))))), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ScrollSync, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, ({\n    clientHeight,\n    clientWidth,\n    onScroll,\n    scrollHeight,\n    scrollLeft,\n    scrollTop,\n    scrollWidth\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"LeftColumn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    rowCount: items.length,\n    width: width,\n    height: height,\n    rowHeight: rowHeight,\n    rowRenderer: rowRenderer,\n    overscanRowCount: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"RightColumn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Grid, Object.assign({\n    onScroll: onScroll\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  })))))))))));\n};\nexport class MisTarjetas extends Component {\n  componentDidMount() {\n    this.props.getTarjetas();\n    this.props.loadUser(); // this.recursive();\n\n    window.scrollTo(0, 0);\n  }\n\n  render() {\n    if (this.props.isAuthenticated === false && this.props.isLoading === false) return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 14\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TarjetasTable, {\n      tarjetas: this.props.tarjetas.tarjetas,\n      user: this.props.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    tarjetas: state.tarjetas,\n    isAuthenticated: state.auth.isAuthenticated,\n    isLoading: state.auth.isLoading,\n    user: state.auth.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getTarjetas,\n  loadUser\n})(MisTarjetas);","map":{"version":3,"sources":["/Users/fedepoi/klockner_tpm/client/src/components/tarjetas/MisTarjetas.jsx"],"names":["React","Component","connect","getTarjetas","loadUser","Card","CardBody","Row","Col","Table","Button","Container","moment","Link","Redirect","List","ScrollSync","Grid","height","rowHeight","width","useSortableData","items","config","sortConfig","setSortConfig","useState","sortedItems","useMemo","sortableItems","sort","a","b","key","direction","requestSort","TarjetasTable","props","tarjetas","getClassNamesFor","name","undefined","rowRenderer","index","isScrolling","style","timeDiferrence","diff","fecha","numero","color","equipo","prioridad","estado","format","descripcion","pathname","_id","clientHeight","clientWidth","onScroll","scrollHeight","scrollLeft","scrollTop","scrollWidth","length","MisTarjetas","componentDidMount","window","scrollTo","render","isAuthenticated","isLoading","user","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getTarjetas } from \"../../store/actions/tarjetaActions\";\nimport { loadUser } from \"../../store/actions/authActions\";\nimport { Card, CardBody, Row, Col, Table, Button, Container } from \"reactstrap\";\nimport moment from \"moment\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { List, ScrollSync, Grid } from \"react-virtualized\";\n\nconst height = 700;\nconst rowHeight = 40;\nconst width = 1000;\n\nconst useSortableData = (items, config = null) => {\n  const [sortConfig, setSortConfig] = React.useState(config);\n\n  const sortedItems = React.useMemo(() => {\n    let sortableItems = [...items];\n    if (sortConfig !== null) {\n      sortableItems.sort((a, b) => {\n        if (a[sortConfig.key] < b[sortConfig.key]) {\n          return sortConfig.direction === \"ascending\" ? -1 : 1;\n        }\n        if (a[sortConfig.key] > b[sortConfig.key]) {\n          return sortConfig.direction === \"ascending\" ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableItems;\n  }, [items, sortConfig]);\n\n  const requestSort = (key) => {\n    let direction = \"ascending\";\n    if (\n      sortConfig &&\n      sortConfig.key === key &&\n      sortConfig.direction === \"ascending\"\n    ) {\n      direction = \"descending\";\n    }\n    setSortConfig({ key, direction });\n  };\n\n  return { items: sortedItems, requestSort, sortConfig };\n};\n\nexport const TarjetasTable = (props) => {\n  const { items, requestSort, sortConfig } = useSortableData(props.tarjetas);\n  const getClassNamesFor = (name) => {\n    if (!sortConfig) {\n      return;\n    }\n    return sortConfig.key === name ? sortConfig.direction : undefined;\n  };\n\n  const rowRenderer = ({ index, isScrolling, key, style }) => {\n    const timeDiferrence = moment().diff(items[index].fecha, \"days\");\n    return (\n      <div key={key} style={style}>\n        <Col>\n          {items[index].numero}\n          {items[index].color === \"Azul\" ? items[index].color : null}\n          {items[index].color === \"Roja\" ? items[index].color : null}\n          {items[index].color === \"Verde\" ? items[index].color : null}\n          {items[index].color === \"Amarilla\" ? items[index].color : null}\n          {items[index].equipo}\n          <td>\n            {items[index].prioridad}\n\n            {items[index].prioridad === \"Alta\" &&\n              items[index].estado === \"Abierta\" &&\n              timeDiferrence >= 15 && (\n                <li className=\"border-0 p-0 text-danger list-inline-item\">\n                  ⚠️\n                </li>\n              )}\n            {items[index].prioridad === \"Media\" &&\n              items[index].estado === \"Abierta\" &&\n              timeDiferrence >= 30 && (\n                <li className=\"border-0 p-0 text-danger list-inline-item\">\n                  ⚠️\n                </li>\n              )}\n            {items[index].prioridad === \"Baja\" &&\n              items[index].estado === \"Abierta\" &&\n              timeDiferrence >= 60 && (\n                <li className=\"border-0 p-0 text-danger list-inline-item\">\n                  ⚠️\n                </li>\n              )}\n          </td>\n\n          <td>{moment(items[index].fecha).format(\"DD/MM/YYYY LTS\")}</td>\n          <td>{items[index].descripcion}</td>\n\n          <td>{items[index].estado}</td>\n          <td>\n            <Link to={{ pathname: `/tarjeta/${items[index]._id}` }}>\n              <Button\n                color=\"success\"\n                className=\"btn bg-secondary border border-secondary\"\n              >\n                Ver detalle\n              </Button>\n            </Link>\n          </td>\n        </Col>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      <div className=\"page-wrapper d-block\">\n        <div className=\"page-content container-fluid\">\n          <Container>\n            <Row>\n              <Col>\n                <div className=\"d-sm-flex align-items-center\">\n                  <div className=\"\">\n                    <div>\n                      <h2 className=\"mb-3\">Tarjetas</h2>\n                    </div>\n\n                    <div className=\"ml-auto d-sm-flex no-block align-items-center mb-3 d-sm-flex\">\n                      <div className=\"dl\">\n                        <h5 className=\"font-weight-normal\">\n                          Todas las tarjetas en la base de datos\n                        </h5>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"ml-auto d-sm-flex no-block align-items-center mb-3\">\n                    <Col>\n                      <Link to=\"/agregartarjeta\">\n                        <Button color=\"success\" className=\"btn\">\n                          Agregar Tarjeta\n                        </Button>\n                      </Link>\n                    </Col>\n                  </div>\n                </div>\n              </Col>\n            </Row>\n\n            <Card>\n              <CardBody>\n                <ScrollSync>\n                  {({\n                    clientHeight,\n                    clientWidth,\n                    onScroll,\n                    scrollHeight,\n                    scrollLeft,\n                    scrollTop,\n                    scrollWidth,\n                  }) => (\n                    <div className=\"Table\">\n                      <div className=\"LeftColumn\">\n                        <List\n                          rowCount={items.length}\n                          width={width}\n                          height={height}\n                          rowHeight={rowHeight}\n                          rowRenderer={rowRenderer}\n                          overscanRowCount={3}\n                        />\n                      </div>\n                      <div className=\"RightColumn\">\n                        <Grid onScroll={onScroll} {...props} />\n                      </div>\n                    </div>\n                  )}\n                </ScrollSync>\n              </CardBody>\n            </Card>\n          </Container>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport class MisTarjetas extends Component {\n  componentDidMount() {\n    this.props.getTarjetas();\n    this.props.loadUser();\n    // this.recursive();\n    window.scrollTo(0, 0);\n  }\n\n  render() {\n    if (this.props.isAuthenticated === false && this.props.isLoading === false)\n      return <Redirect to=\"/login\" />;\n\n    return (\n      <div>\n        <TarjetasTable\n          tarjetas={this.props.tarjetas.tarjetas}\n          user={this.props.user}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    tarjetas: state.tarjetas,\n    isAuthenticated: state.auth.isAuthenticated,\n    isLoading: state.auth.isLoading,\n    user: state.auth.user,\n  };\n};\nexport default connect(mapStateToProps, { getTarjetas, loadUser })(MisTarjetas);\n"]},"metadata":{},"sourceType":"module"}