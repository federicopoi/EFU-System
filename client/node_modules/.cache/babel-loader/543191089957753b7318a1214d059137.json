{"ast":null,"code":"var _jsxFileName = \"/Users/fedepoi/klockner_tpm/client/src/components/detalletarjeta/cerrartarjeta/CerrarTarjetaModal.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { clearErrors } from \"../../../store/actions/errorActions\";\nimport { cerrarTarjeta } from \"../../../store/actions/tarjetaActions\";\nimport { getCampos } from \"../../../store/actions/camposActions\";\nimport { Button, Modal, ModalHeader, ModalBody, Form, Label, Input, FormGroup, Alert } from \"reactstrap\";\nexport class CerrarTarjetaModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = ({\n      target\n    }) => {\n      const {\n        formValues\n      } = this.state;\n      formValues[target.name] = target.value;\n      this.setState({\n        formValues\n      });\n      this.handleValidation(target);\n    };\n\n    this.handleValidation = target => {\n      const {\n        name,\n        value\n      } = target;\n      const fieldValidationErrors = this.state.formErrors;\n      const validity = this.state.formValidity;\n      const isEmail = name === \"email\";\n      const isPassword = name === \"password\";\n      const isInicioReparacion = name === \"inicioReparacionDia\";\n      const isFinReparacion = name === \"finReparacionDia\";\n      const emailTest = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n      validity[name] = value.length > 0;\n      fieldValidationErrors[name] = validity[name] ? \"\" : \"Este campo es requerido y no puede estar vacio\";\n\n      if (validity[name]) {\n        if (isEmail) {\n          validity[name] = emailTest.test(value);\n          fieldValidationErrors[name] = validity[name] ? \"\" : `${name} should be a valid email address`;\n        }\n\n        if (isPassword) {\n          validity[name] = value.length >= 3;\n          fieldValidationErrors[name] = validity[name] ? \"\" : `${name} should be 3 characters minimum`;\n        }\n\n        if (isInicioReparacion) {\n          validity[name] = value > this.props.fecha;\n          fieldValidationErrors[name] = validity[name] ? \"\" : \"Inicio de reparacion tiene que ser posterior a fecha creada.\";\n        }\n\n        if (isFinReparacion) {\n          validity[name] = value > this.props.fecha;\n          fieldValidationErrors[name] = validity[name] ? \"\" : \"Fin de reparacion tiene que ser posterior a fecha creada.\";\n        }\n      }\n\n      this.setState({\n        formErrors: fieldValidationErrors,\n        formValidity: validity\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        isSubmitting: true\n      });\n      const {\n        formValues,\n        formValidity\n      } = this.state;\n\n      if (Object.values(formValidity).every(Boolean)) {\n        // Here is when the validate comes\n        this.setState({\n          isSubmitting: false\n        });\n        const {\n          _id,\n          inicioReparacionDia,\n          inicioReparacionHora,\n          finReparacionDia,\n          finReparacionHora,\n          responsable,\n          causa,\n          riesgoFinal,\n          tareaRealizada,\n          tipoAccion,\n          materialUtilizado,\n          convertida\n        } = this.state.formValues;\n        const horaInicio = inicioReparacionHora.split(\":\");\n        const horaFinal = finReparacionHora.split(\":\");\n        const InicioReparacionHoraFloat = parseFloat(horaInicio[0]);\n        const FinReparacionHoraFloat = parseFloat(horaFinal[0]);\n        const horaFinal1 = FinReparacionHoraFloat - InicioReparacionHoraFloat;\n        const tiemploEmpleadoString = `${horaFinal1}`; // Cerrar Tarjeta\n\n        const tarjetaActualizada = {\n          _id,\n          inicioReparacion: inicioReparacionDia + \" \" + inicioReparacionHora,\n          finReparacion: finReparacionDia + \" \" + finReparacionHora,\n          responsable,\n          tiempoEmpleado: tiemploEmpleadoString,\n          causa,\n          tareaRealizada,\n          tipoAccion,\n          riesgoFinal,\n          materialUtilizado,\n          convertida: this.state.convertida\n        };\n        this.props.cerrarTarjeta(tarjetaActualizada);\n      } else {\n        for (let key in formValues) {\n          let target = {\n            name: key,\n            value: formValues[key]\n          };\n          this.handleValidation(target);\n        }\n\n        this.setState({\n          isSubmitting: false\n        });\n      }\n    };\n\n    this.onChangeConvertida = e => {\n      this.setState({\n        formValues: {\n          convertida: e.tarjet.value\n        }\n      });\n    };\n\n    this.toggle = () => {\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n\n    this.state = {\n      formValues: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        // tiempoEmpleado: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\"\n      },\n      formErrors: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\"\n      },\n      formValidity: {\n        _id: this.props._id,\n        inicioReparacionDia: false,\n        inicioReparacionHora: false,\n        finReparacionDia: false,\n        finReparacionHora: false,\n        responsable: false,\n        causa: false,\n        riesgoFinal: false,\n        tareaRealizada: false,\n        tipoAccion: false,\n        materialUtilizado: false\n      },\n      isSubmitting: false,\n      modal: false,\n      convertida: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.getCampos();\n  }\n\n  render() {\n    const {\n      campos\n    } = this.props.campos;\n    const {\n      formValues,\n      formErrors,\n      isSubmitting\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.toggle,\n      style: {\n        cursor: \"pointer\"\n      },\n      className: \"my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }\n    }, \"Cerrar Tarjeta\"), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, \"Cerrar Tarjeta\"), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, \"Inicio de la Tarea\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.inicioReparacionDia,\n      type: \"date\",\n      name: \"inicioReparacionDia\",\n      id: \"inicioReparacionDia\",\n      className: `form-control ${formErrors.inicioReparacionDia ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, formErrors.inicioReparacionDia), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.inicioReparacionHora,\n      type: \"time\",\n      name: \"inicioReparacionHora\",\n      id: \"inicioReparacionHora\",\n      className: `form-control ${formErrors.inicioReparacionHora ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, formErrors.inicioReparacionHora), /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, \"Fin de la Tarea\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.finReparacionDia,\n      type: \"date\",\n      name: \"finReparacionDia\",\n      id: \"finReparacionDia\",\n      className: `form-control ${formErrors.finReparacionDia ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }\n    }, formErrors.finReparacionDia), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.finReparacionHora,\n      type: \"time\",\n      name: \"finReparacionHora\",\n      id: \"finReparacionHora\",\n      className: `form-control ${formErrors.finReparacionHora ? \"is-invalid\" : \"mb-2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }\n    }, formErrors.finReparacionHora), /*#__PURE__*/React.createElement(Label, {\n      for: \"responsable\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }\n    }, \"Responsable\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.responsable,\n      type: \"text\",\n      name: \"responsable\",\n      id: \"responsable\",\n      className: `form-control ${formErrors.responsable ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }\n    }, formErrors.responsable), /*#__PURE__*/React.createElement(Label, {\n      className: \"mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    }, \"Riesgo Final\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"select\",\n      name: \"riesgoFinal\",\n      id: \"riesgoFinal\",\n      onChange: this.handleChange,\n      value: formValues.riesgoFinal,\n      className: `form-control ${formErrors.riesgoFinal ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 19\n      }\n    }, \"Seleccionar\"), campos && campos.filter(({\n      name,\n      value\n    }) => {\n      return name === \"riesgoFinal\";\n    }).map(({\n      name,\n      value,\n      _id\n    }, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: index,\n        _id: _id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 27\n        }\n      }, value);\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }, formErrors.riesgoFinal), /*#__PURE__*/React.createElement(Label, {\n      className: \"mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }\n    }, \"Causa de la Anomalia\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.causa,\n      type: \"text\",\n      name: \"causa\",\n      id: \"causa\",\n      className: `form-control ${formErrors.causa ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }\n    }, formErrors.causa), /*#__PURE__*/React.createElement(Label, {\n      className: \"mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }\n    }, \"Tarea Realizada\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.tareaRealizada,\n      type: \"text\",\n      name: \"tareaRealizada\",\n      id: \"tareaRealizada\",\n      className: `form-control ${formErrors.tareaRealizada ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 17\n      }\n    }, formErrors.tareaRealizada), /*#__PURE__*/React.createElement(Label, {\n      className: \"mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }\n    }, \"Tipo de acci\\xF3n a realizar *\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"select\",\n      name: \"tipoAccion\",\n      id: \"tipoAccion\",\n      className: `form-control ${formErrors.tipoAccion ? \"is-invalid\" : \"\"}`,\n      onChange: this.handleChange,\n      value: formValues.tipoAccion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 19\n      }\n    }, \"Seleccionar\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 19\n      }\n    }, \"Eliminar\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 19\n      }\n    }, \"Contener\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 19\n      }\n    }, \"Reemplazar\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 19\n      }\n    }, \"Simplificar\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }\n    }, formErrors.tipoAccion), /*#__PURE__*/React.createElement(Label, {\n      className: \"mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }\n    }, \"Material Utilizado\"), /*#__PURE__*/React.createElement(Input, {\n      onChange: this.handleChange,\n      value: formValues.materialUtilizado,\n      type: \"text\",\n      name: \"materialUtilizado\",\n      id: \"materialUtilizado\",\n      className: `form-control ${formErrors.materialUtilizado ? \"is-invalid\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 17\n      }\n    }, formErrors.materialUtilizado), this.props.color !== \"Azul\" && /*#__PURE__*/React.createElement(FormGroup, {\n      check: true,\n      className: \"mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      check: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"checkbox\",\n      id: \"convertida\",\n      name: \"convertida\",\n      onChange: () => {\n        this.setState({\n          convertida: !this.state.convertida\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 23\n      }\n    }), \"Tarjeta Convertida\")), /*#__PURE__*/React.createElement(Button, {\n      color: \"dark\",\n      block: true,\n      style: {\n        marginTop: \"2rem\"\n      },\n      type: \"submit\",\n      className: \"btn btn-primary btn-block\",\n      disabled: isSubmitting,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 17\n      }\n    }, isSubmitting ? \"Por favor espere...\" : \"Subir\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  error: state.error,\n  campos: state.campos\n});\n\nexport default connect(mapStateToProps, {\n  clearErrors,\n  cerrarTarjeta,\n  getCampos\n})(CerrarTarjetaModal);","map":{"version":3,"sources":["/Users/fedepoi/klockner_tpm/client/src/components/detalletarjeta/cerrartarjeta/CerrarTarjetaModal.jsx"],"names":["React","Component","connect","clearErrors","cerrarTarjeta","getCampos","Button","Modal","ModalHeader","ModalBody","Form","Label","Input","FormGroup","Alert","CerrarTarjetaModal","constructor","props","handleChange","target","formValues","state","name","value","setState","handleValidation","fieldValidationErrors","formErrors","validity","formValidity","isEmail","isPassword","isInicioReparacion","isFinReparacion","emailTest","length","test","fecha","handleSubmit","event","preventDefault","isSubmitting","Object","values","every","Boolean","_id","inicioReparacionDia","inicioReparacionHora","finReparacionDia","finReparacionHora","responsable","causa","riesgoFinal","tareaRealizada","tipoAccion","materialUtilizado","convertida","horaInicio","split","horaFinal","InicioReparacionHoraFloat","parseFloat","FinReparacionHoraFloat","horaFinal1","tiemploEmpleadoString","tarjetaActualizada","inicioReparacion","finReparacion","tiempoEmpleado","key","onChangeConvertida","e","tarjet","toggle","modal","componentDidMount","render","campos","cursor","filter","map","index","color","marginTop","mapStateToProps","error"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { clearErrors } from \"../../../store/actions/errorActions\";\nimport { cerrarTarjeta } from \"../../../store/actions/tarjetaActions\";\nimport { getCampos } from \"../../../store/actions/camposActions\";\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  Form,\n  Label,\n  Input,\n  FormGroup,\n  Alert,\n} from \"reactstrap\";\nexport class CerrarTarjetaModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formValues: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        // tiempoEmpleado: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\",\n      },\n      formErrors: {\n        _id: this.props._id,\n        inicioReparacionDia: \"\",\n        inicioReparacionHora: \"\",\n        finReparacionDia: \"\",\n        finReparacionHora: \"\",\n        responsable: \"\",\n        causa: \"\",\n        riesgoFinal: \"\",\n        tareaRealizada: \"\",\n        tipoAccion: \"\",\n        materialUtilizado: \"\",\n      },\n      formValidity: {\n        _id: this.props._id,\n        inicioReparacionDia: false,\n        inicioReparacionHora: false,\n        finReparacionDia: false,\n        finReparacionHora: false,\n        responsable: false,\n        causa: false,\n        riesgoFinal: false,\n        tareaRealizada: false,\n        tipoAccion: false,\n        materialUtilizado: false,\n      },\n      isSubmitting: false,\n      modal: false,\n      convertida: false,\n    };\n  }\n\n  handleChange = ({ target }) => {\n    const { formValues } = this.state;\n    formValues[target.name] = target.value;\n    this.setState({ formValues });\n    this.handleValidation(target);\n  };\n\n  handleValidation = (target) => {\n    const { name, value } = target;\n    const fieldValidationErrors = this.state.formErrors;\n    const validity = this.state.formValidity;\n    const isEmail = name === \"email\";\n    const isPassword = name === \"password\";\n    const isInicioReparacion = name === \"inicioReparacionDia\";\n    const isFinReparacion = name === \"finReparacionDia\";\n    const emailTest = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n\n    validity[name] = value.length > 0;\n    fieldValidationErrors[name] = validity[name]\n      ? \"\"\n      : \"Este campo es requerido y no puede estar vacio\";\n\n    if (validity[name]) {\n      if (isEmail) {\n        validity[name] = emailTest.test(value);\n        fieldValidationErrors[name] = validity[name]\n          ? \"\"\n          : `${name} should be a valid email address`;\n      }\n      if (isPassword) {\n        validity[name] = value.length >= 3;\n        fieldValidationErrors[name] = validity[name]\n          ? \"\"\n          : `${name} should be 3 characters minimum`;\n      }\n      if (isInicioReparacion) {\n        validity[name] = value > this.props.fecha;\n        fieldValidationErrors[name] = validity[name]\n          ? \"\"\n          : \"Inicio de reparacion tiene que ser posterior a fecha creada.\";\n      }\n      if (isFinReparacion) {\n        validity[name] = value > this.props.fecha;\n        fieldValidationErrors[name] = validity[name]\n          ? \"\"\n          : \"Fin de reparacion tiene que ser posterior a fecha creada.\";\n      }\n    }\n\n    this.setState({\n      formErrors: fieldValidationErrors,\n      formValidity: validity,\n    });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ isSubmitting: true });\n    const { formValues, formValidity } = this.state;\n    if (Object.values(formValidity).every(Boolean)) {\n      // Here is when the validate comes\n      this.setState({ isSubmitting: false });\n\n      const {\n        _id,\n        inicioReparacionDia,\n        inicioReparacionHora,\n        finReparacionDia,\n        finReparacionHora,\n        responsable,\n        causa,\n        riesgoFinal,\n        tareaRealizada,\n        tipoAccion,\n        materialUtilizado,\n        convertida,\n      } = this.state.formValues;\n\n      const horaInicio = inicioReparacionHora.split(\":\");\n      const horaFinal = finReparacionHora.split(\":\");\n\n      const InicioReparacionHoraFloat = parseFloat(horaInicio[0]);\n      const FinReparacionHoraFloat = parseFloat(horaFinal[0]);\n\n      const horaFinal1 = FinReparacionHoraFloat - InicioReparacionHoraFloat;\n\n      const tiemploEmpleadoString = `${horaFinal1}`;\n\n      // Cerrar Tarjeta\n      const tarjetaActualizada = {\n        _id,\n        inicioReparacion: inicioReparacionDia + \" \" + inicioReparacionHora,\n        finReparacion: finReparacionDia + \" \" + finReparacionHora,\n        responsable,\n        tiempoEmpleado: tiemploEmpleadoString,\n        causa,\n        tareaRealizada,\n        tipoAccion,\n        riesgoFinal,\n        materialUtilizado,\n        convertida: this.state.convertida,\n      };\n\n      this.props.cerrarTarjeta(tarjetaActualizada);\n    } else {\n      for (let key in formValues) {\n        let target = {\n          name: key,\n          value: formValues[key],\n        };\n        this.handleValidation(target);\n      }\n      this.setState({ isSubmitting: false });\n    }\n  };\n\n  onChangeConvertida = (e) => {\n    this.setState({ formValues: { convertida: e.tarjet.value } });\n  };\n\n  toggle = () => {\n    this.setState({\n      modal: !this.state.modal,\n    });\n  };\n\n  componentDidMount() {\n    this.props.getCampos();\n  }\n  render() {\n    const { campos } = this.props.campos;\n    const { formValues, formErrors, isSubmitting } = this.state;\n\n    return (\n      <div>\n        <p onClick={this.toggle} style={{ cursor: \"pointer\" }} className=\"my-3\">\n          Cerrar Tarjeta\n        </p>\n        <Modal isOpen={this.state.modal} toggle={this.toggle}>\n          <ModalHeader toggle={this.toggle}>Cerrar Tarjeta</ModalHeader>\n          <ModalBody>\n            <Form onSubmit={this.handleSubmit}>\n              <FormGroup>\n                <Label>Inicio de la Tarea</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.inicioReparacionDia}\n                  type=\"date\"\n                  name=\"inicioReparacionDia\"\n                  id=\"inicioReparacionDia\"\n                  className={`form-control ${\n                    formErrors.inicioReparacionDia ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.inicioReparacionDia}\n                </div>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.inicioReparacionHora}\n                  type=\"time\"\n                  name=\"inicioReparacionHora\"\n                  id=\"inicioReparacionHora\"\n                  className={`form-control ${\n                    formErrors.inicioReparacionHora ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.inicioReparacionHora}\n                </div>\n\n                <Label>Fin de la Tarea</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.finReparacionDia}\n                  type=\"date\"\n                  name=\"finReparacionDia\"\n                  id=\"finReparacionDia\"\n                  className={`form-control ${\n                    formErrors.finReparacionDia ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.finReparacionDia}\n                </div>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.finReparacionHora}\n                  type=\"time\"\n                  name=\"finReparacionHora\"\n                  id=\"finReparacionHora\"\n                  className={`form-control ${\n                    formErrors.finReparacionHora ? \"is-invalid\" : \"mb-2\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.finReparacionHora}\n                </div>\n\n                <Label for=\"responsable\">Responsable</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.responsable}\n                  type=\"text\"\n                  name=\"responsable\"\n                  id=\"responsable\"\n                  className={`form-control ${\n                    formErrors.responsable ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.responsable}\n                </div>\n\n                <Label className=\"mt-2\">Riesgo Final</Label>\n                <Input\n                  type=\"select\"\n                  name=\"riesgoFinal\"\n                  id=\"riesgoFinal\"\n                  onChange={this.handleChange}\n                  value={formValues.riesgoFinal}\n                  className={`form-control ${\n                    formErrors.riesgoFinal ? \"is-invalid\" : \"\"\n                  }`}\n                >\n                  <option>Seleccionar</option>\n                  {campos &&\n                    campos\n                      .filter(({ name, value }) => {\n                        return name === \"riesgoFinal\";\n                      })\n                      .map(({ name, value, _id }, index) => {\n                        return (\n                          <option key={index} _id={_id}>\n                            {value}\n                          </option>\n                        );\n                      })}\n                </Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.riesgoFinal}\n                </div>\n\n                <Label className=\"mt-2\">Causa de la Anomalia</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.causa}\n                  type=\"text\"\n                  name=\"causa\"\n                  id=\"causa\"\n                  className={`form-control ${\n                    formErrors.causa ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">{formErrors.causa}</div>\n\n                <Label className=\"mt-2\">Tarea Realizada</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.tareaRealizada}\n                  type=\"text\"\n                  name=\"tareaRealizada\"\n                  id=\"tareaRealizada\"\n                  className={`form-control ${\n                    formErrors.tareaRealizada ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.tareaRealizada}\n                </div>\n\n                <Label className=\"mt-2\">Tipo de acción a realizar *</Label>\n                <Input\n                  type=\"select\"\n                  name=\"tipoAccion\"\n                  id=\"tipoAccion\"\n                  className={`form-control ${\n                    formErrors.tipoAccion ? \"is-invalid\" : \"\"\n                  }`}\n                  onChange={this.handleChange}\n                  value={formValues.tipoAccion}\n                >\n                  <option>Seleccionar</option>\n                  <option>Eliminar</option>\n                  <option>Contener</option>\n                  <option>Reemplazar</option>\n                  <option>Simplificar</option>\n                </Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.tipoAccion}\n                </div>\n\n                <Label className=\"mt-2\">Material Utilizado</Label>\n                <Input\n                  onChange={this.handleChange}\n                  value={formValues.materialUtilizado}\n                  type=\"text\"\n                  name=\"materialUtilizado\"\n                  id=\"materialUtilizado\"\n                  className={`form-control ${\n                    formErrors.materialUtilizado ? \"is-invalid\" : \"\"\n                  }`}\n                ></Input>\n                <div className=\"invalid-feedback mb-2\">\n                  {formErrors.materialUtilizado}\n                </div>\n\n                {this.props.color !== \"Azul\" && (\n                  <FormGroup check className=\"mt-2\">\n                    <Label check>\n                      <Input\n                        type=\"checkbox\"\n                        id=\"convertida\"\n                        name=\"convertida\"\n                        onChange={() => {\n                          this.setState({\n                            convertida: !this.state.convertida,\n                          });\n                        }}\n                      />\n                      Tarjeta Convertida\n                    </Label>\n                  </FormGroup>\n                )}\n                {/* {this.state.msg ? (\n                  <Alert color=\"danger\" className=\"mt-3\">\n                    {this.state.msg}\n                  </Alert>\n                ) : null} */}\n                <Button\n                  color=\"dark\"\n                  block\n                  style={{ marginTop: \"2rem\" }}\n                  type=\"submit\"\n                  className=\"btn btn-primary btn-block\"\n                  disabled={isSubmitting}\n                >\n                  {isSubmitting ? \"Por favor espere...\" : \"Subir\"}\n                </Button>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => ({\n  error: state.error,\n  campos: state.campos,\n});\nexport default connect(mapStateToProps, {\n  clearErrors,\n  cerrarTarjeta,\n  getCampos,\n})(CerrarTarjetaModal);\n"]},"metadata":{},"sourceType":"module"}